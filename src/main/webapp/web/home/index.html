<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>OpenServ :: Home</title>

    <link href="../../content/dojo-1.9.1/dgrid/css/skins/soria.css" rel="stylesheet"/>
    <link href="../../content/dojo-1.9.1/dijit/themes/soria/soria.css" rel="stylesheet"/>
    <link href="../../content/dojo-1.9.1/dijit/themes/claro/claro.css" rel="stylesheet"/>
    <style type="text/css">
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            overflow:hidden;
            font: 12px Myriad,Helvetica,Tahoma,Arial,clean,sans-serif;
        }
        .tagline{
            color: #B2B2B2;
            font-family: Verdana,Arial,Helvetica,sans-serif;
            font-size: 10px;
            font-weight: bold;
            padding: 7px 0 0;
            text-align: center;
            text-transform: uppercase;
        }
        .topNav{
            text-align: right;
            font-family: Verdana,Arial,Helvetica,sans-serif;
        }
        .menu-right li{
            display: inline;
            list-style-type: none;
            margin: 0 10px 0 0;
        }
        .topNav a{
            color: #FFFFFF;
        }
        #main .ContentPane{
            background: none repeat scroll 0 0 #EEEEEE;
        }
    </style>

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body class="soria">
    <div id="main" data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design:'headline'" style="height: 100%; width: 100%; padding: 0">
        <div id="desktopHeader" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region: 'top'" style="background-color: #718BA6; padding:0" class="claro">
            <div>
                <h2 class="tagline">A <span class="taglineEm" style="color: #EEEEEE; font-weight: bold">Loan Servicing</span> Application</h2>
                <div class="topNav">
                    <ul class="menu-right">
                        <li class="menu-item"><a href="../home/index.html">Home</a></li>
                    </ul>
                </div>
            </div>
            <div id="mainMenu"></div>
        </div>
        <div id="content-panel" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region: 'center'">
        </div>
      </div>


    <!-- Dojo JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" data-dojo-config="isDebug:true,async:true,parseOnLoad:true" src="../../content/dojo-1.9.1/dojo/dojo.js"></script>
    <!-- load mootools for masked text fields -->
    <script src="../../content/magicbox/js/mootools-core-1.4.1-full-compat.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../content/magicbox/js/mootools-more-1.4.0.1.js" type="text/javascript" charset="utf-8"></script>

    <script src="../../content/magicbox/js/Meio.Mask.js" type="text/javascript"></script>
    <script src="../../content/magicbox/js/Meio.Mask.Fixed.js" type="text/javascript"></script>
    <script src="../../content/magicbox/js/Meio.Mask.Reverse.js" type="text/javascript"></script>
    <script src="../../content/magicbox/js/Meio.Mask.Repeat.js" type="text/javascript"></script>
    <script src="../../content/magicbox/js/Meio.Mask.Reverse.js" type="text/javascript"></script>
    <script src="../../content/magicbox/js/Meio.Mask.Regexp.js" type="text/javascript"></script>
    <script src="../../content/magicbox/js/Meio.Mask.Extras.js" type="text/javascript"></script>

    <script type="text/javascript">
            require(['dijit/registry', 'dojo/request', 'dijit/MenuBar', 'dijit/MenuBarItem', 'dojo/topic', 'dijit/layout/ContentPane'],
                    function(registry, request, MenuBar, MenuBarItem, topic){
                        var mainMenu = new MenuBar({
                            style: 'background: none repeat scroll 0 0 #EEEEEE'
                        });
                        var addLoan = new MenuBarItem({
                            label: 'Add Loan',
                            onClick: function(){
                                loadAddLoan(request,topic,registry);
                            }
                        });
                        mainMenu.addChild(addLoan);
                        mainMenu.placeAt("mainMenu");
                        mainMenu.startup();
                        }
                    );

        function loadAddLoan(request, topic, registry){
            request("../addloan/addloan.html").then(function(data){
                registry.byId("content-panel").set("content", data);
                var scriptNodeList = document.getElementById("content-panel").getElementsByTagName("script");
                for(var i = 0; i < scriptNodeList.length; ++i){
                    eval(scriptNodeList[i].innerHTML);
                }
            });
            var loanEntryCompleteHandle = topic.subscribe("addloansuccess", function(command){
                if(command == 'addAnother'){
                    loadAddLoan(request, topic, registry);
                }
                else{
                    window.location = "../home/index.html";
                }
                loanEntryCompleteHandle.remove();
            });
        }
    </script>
    </body>
</html>
